{"name":"Lean.Server.FileWorker","instances":[{"typeNames":["Lean.Server.FileWorker.PartialHandlerInfo"],"name":"Lean.Server.FileWorker.instInhabitedPartialHandlerInfo","className":"Inhabited"},{"typeNames":["_private.Lean.Server.FileWorker.0.Lean.Server.FileWorker.ReportSnapshotsState"],"name":"Lean.Server.FileWorker.instInhabitedReportSnapshotsState","className":"Inhabited"},{"typeNames":["Lean.Server.FileWorker.MemorizedInteractiveDiagnostics"],"name":"Lean.Server.FileWorker.instTypeNameMemorizedInteractiveDiagnostics","className":"TypeName"}],"imports":["Init.System.IO","Std.Sync.Channel","Lean.Data.RBMap","Lean.Environment","Lean.Data.Lsp","Lean.Data.Json.FromToJson","Lean.LoadDynlib","Lean.Language.Lean","Lean.Server.Utils","Lean.Server.AsyncList","Lean.Server.References","Lean.Server.FileWorker.Utils","Lean.Server.FileWorker.RequestHandling","Lean.Server.FileWorker.WidgetRequests","Lean.Server.FileWorker.SetupFile","Lean.Server.Rpc.Basic","Lean.Widget.InteractiveDiagnostic","Lean.Server.Completion.ImportCompletion","Lean.Server.CodeActions.UnknownIdentifier"],"declarations":[{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L1057-L1067","name":"Lean.Server.FileWorker.workerMain","line":1057,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.workerMain","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.workerMain\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">workerMain</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">opts</span> : <a href=\"./Lean/Data/Options.html#Lean.Options\">Options</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO\">IO</a> <a href=\"./Init/Prelude.html#UInt32\">UInt32</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L1050-L1055","name":"Lean.Server.FileWorker.initAndRunWorker.writeErrorDiag","line":1050,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.initAndRunWorker.writeErrorDiag","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.initAndRunWorker.writeErrorDiag\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">initAndRunWorker</span>.<span class=\"name\">writeErrorDiag</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">o</span> : <a href=\"./Init/System/IO.html#IO.FS.Stream\">IO.FS.Stream</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">doc</span> : <a href=\"./Lean/Server/Utils.html#Lean.Server.DocumentMeta\">DocumentMeta</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">err</span> : <a href=\"./Init/System/IOError.html#IO.Error\">IO.Error</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO\">IO</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L1016-L1055","name":"Lean.Server.FileWorker.initAndRunWorker","line":1016,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.initAndRunWorker","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.initAndRunWorker\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">initAndRunWorker</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">i </span><span class=\"fn\">o </span><span class=\"fn\">e</span> : <a href=\"./Init/System/IO.html#IO.FS.Stream\">IO.FS.Stream</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">opts</span> : <a href=\"./Lean/Data/Options.html#Lean.Options\">Options</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO\">IO</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L1003-L1014","name":"Lean.Server.FileWorker.runRefreshTasks.sleepWithCancellation","line":1003,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.runRefreshTasks.sleepWithCancellation","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.runRefreshTasks.sleepWithCancellation\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">runRefreshTasks</span>.<span class=\"name\">sleepWithCancellation</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">ms</span> : <a href=\"./Init/Prelude.html#UInt32\">UInt32</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#BaseIO\">BaseIO</a> <a href=\"./Init/Prelude.html#Bool\">Bool</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L945-L1014","name":"Lean.Server.FileWorker.runRefreshTasks","line":945,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.runRefreshTasks","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.runRefreshTasks\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">runRefreshTasks</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM\">WorkerM</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Array\">Array</a> <span class=\"fn\">(<a href=\"./Lean/Server/ServerTask.html#Lean.Server.ServerTask\">ServerTask</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a>)</span>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L905-L942","name":"Lean.Server.FileWorker.mainLoop","line":905,"kind":"opaque","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.mainLoop","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">partial def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.mainLoop\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">mainLoop</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">hIn</span> : <a href=\"./Init/System/IO.html#IO.FS.Stream\">IO.FS.Stream</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM\">WorkerM</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L897-L899","name":"Lean.Server.FileWorker.handleResponseError","line":897,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleResponseError","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleResponseError\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">handleResponseError</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">id</span> : <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.RequestID\">JsonRpc.RequestID</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">code</span> : <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.ErrorCode\">JsonRpc.ErrorCode</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">message</span> : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM\">WorkerM</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L893-L895","name":"Lean.Server.FileWorker.handleResponse","line":893,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleResponse","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleResponse\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">handleResponse</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">id</span> : <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.RequestID\">JsonRpc.RequestID</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">response</span> : <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Json</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM\">WorkerM</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L860-L891","name":"Lean.Server.FileWorker.handleRequest","line":860,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleRequest","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleRequest\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">handleRequest</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">id</span> : <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.RequestID\">JsonRpc.RequestID</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">method</span> : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">params</span> : <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Json</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM\">WorkerM</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L848-L858","name":"Lean.Server.FileWorker.emitRequestResponse.emitResponse","line":848,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.emitRequestResponse.emitResponse","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.emitRequestResponse.emitResponse\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">emitRequestResponse</span>.<span class=\"name\">emitResponse</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">method</span> : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">ctx</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">m</span> : <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.Message\">JsonRpc.Message</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">isComplete</span> : <a href=\"./Init/Prelude.html#Bool\">Bool</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO\">IO</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L824-L858","name":"Lean.Server.FileWorker.emitRequestResponse","line":824,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.emitRequestResponse","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.emitRequestResponse\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">emitRequestResponse</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">requestTask?</span> : <span class=\"fn\"><a href=\"./Init/Prelude.html#Except\">Except</a> <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestError\">RequestError</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\">RequestTask</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.LspResponse\">LspResponse</a> <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Json</a>)</span>)</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">cancelTk</span> : <a href=\"./Lean/Server/RequestCancellation.html#Lean.Server.RequestCancellationToken\">RequestCancellationToken</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">id</span> : <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.RequestID\">JsonRpc.RequestID</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">method</span> : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM\">WorkerM</a> <span class=\"fn\">(<a href=\"./Lean/Server/ServerTask.html#Lean.Server.ServerTask\">ServerTask</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Except\">Except</a> <a href=\"./Init/System/IOError.html#IO.Error\">IO.Error</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a>)</span>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L790-L822","name":"Lean.Server.FileWorker.handlePostRequestSpecialCases","line":790,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handlePostRequestSpecialCases","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handlePostRequestSpecialCases\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">handlePostRequestSpecialCases</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">id</span> : <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.RequestID\">JsonRpc.RequestID</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">method</span> : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">params</span> : <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Json</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">task</span> : <span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\">RequestTask</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.LspResponse\">LspResponse</a> <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Json</a>)</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">RequestM</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\">RequestTask</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.LspResponse\">LspResponse</a> <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Json</a>)</span>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L758-L788","name":"Lean.Server.FileWorker.handlePreRequestSpecialCases?","line":758,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handlePreRequestSpecialCases?","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handlePreRequestSpecialCases?\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">handlePreRequestSpecialCases?</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">ctx</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">st</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState\">WorkerState</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">id</span> : <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.RequestID\">JsonRpc.RequestID</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">method</span> : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">params</span> : <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Json</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">RequestM</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Option\">Option</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\">RequestTask</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.LspResponse\">LspResponse</a> <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Json</a>)</span>)</span>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L732-L756","name":"Lean.Server.FileWorker.handleGetInteractiveDiagnosticsRequest","line":732,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleGetInteractiveDiagnosticsRequest","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleGetInteractiveDiagnosticsRequest\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">handleGetInteractiveDiagnosticsRequest</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">ctx</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">params</span> : <a href=\"./Lean/Server/FileWorker/WidgetRequests.html#Lean.Widget.GetInteractiveDiagnosticsParams\">Widget.GetInteractiveDiagnosticsParams</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">RequestM</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Lean/Widget/InteractiveDiagnostic.html#Lean.Widget.InteractiveDiagnostic\">Widget.InteractiveDiagnostic</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L706-L729","name":"Lean.Server.FileWorker.handleStatefulPreRequestSpecialCases","line":706,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleStatefulPreRequestSpecialCases","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleStatefulPreRequestSpecialCases\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">handleStatefulPreRequestSpecialCases</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">id</span> : <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.RequestID\">JsonRpc.RequestID</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">method</span> : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">params</span> : <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Json</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM\">WorkerM</a> <a href=\"./Init/Prelude.html#Bool\">Bool</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L682-L704","name":"Lean.Server.FileWorker.handleImportCompletionRequest","line":682,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleImportCompletionRequest","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleImportCompletionRequest\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">handleImportCompletionRequest</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">id</span> : <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.RequestID\">JsonRpc.RequestID</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">params</span> : <a href=\"./Lean/Data/Lsp/LanguageFeatures.html#Lean.Lsp.CompletionParams\">Lsp.CompletionParams</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM\">WorkerM</a> <span class=\"fn\">(<a href=\"./Lean/Server/ServerTask.html#Lean.Server.ServerTask\">ServerTask</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Except\">Except</a> <a href=\"./Init/System/IOError.html#IO.Error\">IO.Error</a> <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.AvailableImportsCache\">AvailableImportsCache</a>)</span>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L678-L680","name":"Lean.Server.FileWorker.queueRequest","line":678,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.queueRequest","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.queueRequest\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">queueRequest</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">id</span> : <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.RequestID\">JsonRpc.RequestID</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">r</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PendingRequest\">PendingRequest</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM\">WorkerM</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L667-L676","name":"Lean.Server.FileWorker.handleNotification","line":667,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleNotification","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleNotification\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">handleNotification</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">method</span> : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">params</span> : <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Json</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM\">WorkerM</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L662-L665","name":"Lean.Server.FileWorker.parseParams","line":662,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.parseParams","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.parseParams\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">parseParams</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">paramType</span> : <a href=\"./foundational_types.html\">Type</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Lean/Data/Json/FromToJson.html#Lean.FromJson\">FromJson</a> <span class=\"fn\">paramType</span></span>]</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">params</span> : <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Json</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM\">WorkerM</a> <span class=\"fn\">paramType</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L653-L657","name":"Lean.Server.FileWorker.handleRpcConnect","line":653,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleRpcConnect","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleRpcConnect\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">handleRpcConnect</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Data/Lsp/Extra.html#Lean.Lsp.RpcConnectParams\">Lsp.RpcConnectParams</a> → <span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM\">WorkerM</a> <a href=\"./Lean/Data/Lsp/Extra.html#Lean.Lsp.RpcConnected\">Lsp.RpcConnected</a></span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L642-L646","name":"Lean.Server.FileWorker.handleRpcKeepAlive","line":642,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleRpcKeepAlive","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleRpcKeepAlive\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">handleRpcKeepAlive</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">p</span> : <a href=\"./Lean/Data/Lsp/Extra.html#Lean.Lsp.RpcKeepAliveParams\">Lsp.RpcKeepAliveParams</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM\">WorkerM</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L629-L640","name":"Lean.Server.FileWorker.handleRpcRelease","line":629,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleRpcRelease","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleRpcRelease\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">handleRpcRelease</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">p</span> : <a href=\"./Lean/Data/Lsp/Extra.html#Lean.Lsp.RpcReleaseParams\">Lsp.RpcReleaseParams</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM\">WorkerM</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L607-L627","name":"Lean.Server.FileWorker.handleStaleDependency","line":607,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleStaleDependency","doc":"Received from the watchdog when a dependency of this file is detected as being stale.\nIssues a sticky diagnostic to the client that it should run \"Restart File\".\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleStaleDependency\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">handleStaleDependency</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Data/Lsp/Internal.html#Lean.Lsp.LeanStaleDependencyParams\">Lsp.LeanStaleDependencyParams</a> → <span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM\">WorkerM</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L600-L605","name":"Lean.Server.FileWorker.handleCancelRequest","line":600,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleCancelRequest","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleCancelRequest\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">handleCancelRequest</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">p</span> : <a href=\"./Lean/Data/Lsp/CancelParams.html#Lean.Lsp.CancelParams\">Lsp.CancelParams</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM\">WorkerM</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L574-L598","name":"Lean.Server.FileWorker.handleDidChange","line":574,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleDidChange","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.handleDidChange\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">handleDidChange</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">p</span> : <a href=\"./Lean/Data/Lsp/TextSync.html#Lean.Lsp.DidChangeTextDocumentParams\">Lsp.DidChangeTextDocumentParams</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM\">WorkerM</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L555-L568","name":"Lean.Server.FileWorker.updateDocument","line":555,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.updateDocument","doc":"Given the new document, updates editable doc state. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.updateDocument\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">updateDocument</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">doc</span> : <a href=\"./Lean/Server/Utils.html#Lean.Server.DocumentMeta\">DocumentMeta</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM\">WorkerM</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L552-L553","name":"Lean.Server.FileWorker.updatePendingRequests","line":552,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.updatePendingRequests","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.updatePendingRequests\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">updatePendingRequests</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">map</span> : <span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PendingRequestMap\">PendingRequestMap</a> → <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PendingRequestMap\">PendingRequestMap</a></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM\">WorkerM</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L542-L547","name":"Lean.Server.FileWorker.sendUntypedServerRequest","line":542,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.sendUntypedServerRequest","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.sendUntypedServerRequest\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">sendUntypedServerRequest</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">ctx</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">method</span> : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">param</span> : <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Json</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#BaseIO\">BaseIO</a> <span class=\"fn\">(<a href=\"./Lean/Server/ServerTask.html#Lean.Server.ServerTask\">ServerTask</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.ServerRequestResponse\">ServerRequestResponse</a> <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Json</a>)</span>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L529-L540","name":"Lean.Server.FileWorker.sendServerRequest","line":529,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.sendServerRequest","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.sendServerRequest\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">sendServerRequest</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">paramType</span> : <a href=\"./foundational_types.html\">Type</a> u_1)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Lean/Data/Json/FromToJson.html#Lean.ToJson\">ToJson</a> <span class=\"fn\">paramType</span></span>]</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">responseType</span> : <a href=\"./foundational_types.html\">Type</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Lean/Data/Json/FromToJson.html#Lean.FromJson\">FromJson</a> <span class=\"fn\">responseType</span></span>]</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Init/Prelude.html#Inhabited\">Inhabited</a> <span class=\"fn\">responseType</span></span>]</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">ctx</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">method</span> : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">param</span> : <span class=\"fn\">paramType</span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#BaseIO\">BaseIO</a> <span class=\"fn\">(<a href=\"./Lean/Server/ServerTask.html#Lean.Server.ServerTask\">ServerTask</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.ServerRequestResponse\">ServerRequestResponse</a> <span class=\"fn\">responseType</span>)</span>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L518-L524","name":"Lean.Server.FileWorker.initializeWorker.getImportClosure?","line":518,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.initializeWorker.getImportClosure?","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.initializeWorker.getImportClosure?\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">initializeWorker</span>.<span class=\"name\">getImportClosure?</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">snap</span> : <a href=\"./Lean/Language/Lean/Types.html#Lean.Language.Lean.InitialSnapshot\">Language.Lean.InitialSnapshot</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Init/Prelude.html#Lean.Name\">Name</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L492-L516","name":"Lean.Server.FileWorker.initializeWorker.mkLspOutputChannel","line":492,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.initializeWorker.mkLspOutputChannel","doc":"Creates an LSP message output channel along with a reader that sends out read messages on\nthe output FS stream after discarding outdated notifications. This is the only component of\nthe worker with access to the output stream, so we can synchronize messages from parallel\nelaboration tasks here. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.initializeWorker.mkLspOutputChannel\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">initializeWorker</span>.<span class=\"name\">mkLspOutputChannel</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">o</span> : <a href=\"./Init/System/IO.html#IO.FS.Stream\">IO.FS.Stream</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">maxDocVersion</span> : <span class=\"fn\"><a href=\"./Init/System/IO.html#IO.Ref\">IO.Ref</a> <a href=\"./Init/Data/Int/Basic.html#Int\">Int</a></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO\">IO</a> <span class=\"fn\">(<a href=\"./Std/Sync/Channel.html#Std.Channel\">Std.Channel</a> <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.Message\">JsonRpc.Message</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L437-L524","name":"Lean.Server.FileWorker.initializeWorker","line":437,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.initializeWorker","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.initializeWorker\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">initializeWorker</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">doc</span> : <a href=\"./Lean/Server/Utils.html#Lean.Server.DocumentMeta\">DocumentMeta</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">o </span><span class=\"fn\">e</span> : <a href=\"./Init/System/IO.html#IO.FS.Stream\">IO.FS.Stream</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">initParams</span> : <a href=\"./Lean/Data/Lsp/InitShutdown.html#Lean.Lsp.InitializeParams\">Lsp.InitializeParams</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">opts</span> : <a href=\"./Lean/Data/Options.html#Lean.Options\">Options</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO\">IO</a> (<a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a> <a href=\"./Init/Prelude.html#Prod\">×</a> <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState\">WorkerState</a>)</span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L366-L433","name":"Lean.Server.FileWorker.setupImports","line":366,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.setupImports","doc":"Callback from Lean language processor after parsing imports that requests necessary information from\nLake for processing imports.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.setupImports\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">setupImports</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">doc</span> : <a href=\"./Lean/Server/Utils.html#Lean.Server.DocumentMeta\">DocumentMeta</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">cmdlineOpts</span> : <a href=\"./Lean/Data/Options.html#Lean.Options\">Options</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">chanOut</span> : <span class=\"fn\"><a href=\"./Std/Sync/Channel.html#Std.Channel\">Std.Channel</a> <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.Message\">JsonRpc.Message</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">stx</span> : <a href=\"./Lean/Elab/Import.html#Lean.Elab.HeaderSyntax\">Elab.HeaderSyntax</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Language/Basic.html#Lean.Language.ProcessingT\">Language.ProcessingT</a> <a href=\"./Init/System/IO.html#IO\">IO</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Except\">Except</a> <a href=\"./Lean/Language/Lean/Types.html#Lean.Language.Lean.HeaderProcessedSnapshot\">Language.Lean.HeaderProcessedSnapshot</a> <a href=\"./Lean/Language/Lean.html#Lean.Language.Lean.SetupImportsResult\">Language.Lean.SetupImportsResult</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L360-L360","name":"Lean.Server.FileWorker.WorkerM","line":360,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerM\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerM</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">α</span> : <a href=\"./foundational_types.html\">Type</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L358-L358","name":"Lean.Server.FileWorker.WorkerState.rpcSessions","line":358,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState.rpcSessions","doc":"A map of RPC session IDs. We allow asynchronous elab tasks and request handlers\nto modify sessions. A single `Ref` ensures atomic transactions. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState.rpcSessions\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerState</span>.<span class=\"name\">rpcSessions</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState\">WorkerState</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Data/RBMap.html#Lean.RBMap\">RBMap</a> <a href=\"./Init/Prelude.html#UInt64\">UInt64</a> <span class=\"fn\">(<a href=\"./Init/System/IO.html#IO.Ref\">IO.Ref</a> <a href=\"./Lean/Server/FileWorker/Utils.html#Lean.Server.FileWorker.RpcSession\">RpcSession</a>)</span> <a href=\"./Init/Data/Ord.html#Ord.compare\">compare</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L355-L355","name":"Lean.Server.FileWorker.WorkerState.pendingRequests","line":355,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState.pendingRequests","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState.pendingRequests\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerState</span>.<span class=\"name\">pendingRequests</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState\">WorkerState</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PendingRequestMap\">PendingRequestMap</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L354-L354","name":"Lean.Server.FileWorker.WorkerState.importCachingTask?","line":354,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState.importCachingTask?","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState.importCachingTask?\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerState</span>.<span class=\"name\">importCachingTask?</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState\">WorkerState</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Option\">Option</a> <span class=\"fn\">(<a href=\"./Lean/Server/ServerTask.html#Lean.Server.ServerTask\">ServerTask</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Except\">Except</a> <a href=\"./Init/System/IOError.html#IO.Error\">IO.Error</a> <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.AvailableImportsCache\">AvailableImportsCache</a>)</span>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L353-L353","name":"Lean.Server.FileWorker.WorkerState.reporterCancelTk","line":353,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState.reporterCancelTk","doc":"Token flagged for aborting `doc.reporter` when a new document version comes in. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState.reporterCancelTk\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerState</span>.<span class=\"name\">reporterCancelTk</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState\">WorkerState</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/System/IO.html#IO.CancelToken\">IO.CancelToken</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L351-L351","name":"Lean.Server.FileWorker.WorkerState.doc","line":351,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState.doc","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState.doc\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerState</span>.<span class=\"name\">doc</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState\">WorkerState</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/FileWorker/Utils.html#Lean.Server.FileWorker.EditableDocument\">EditableDocument</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L350-L350","name":"Lean.Server.FileWorker.WorkerState.mk","line":350,"kind":"ctor","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState.mk","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">constructor</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState.mk\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerState</span>.<span class=\"name\">mk</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">doc</span> : <a href=\"./Lean/Server/FileWorker/Utils.html#Lean.Server.FileWorker.EditableDocument\">EditableDocument</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">reporterCancelTk</span> : <a href=\"./Init/System/IO.html#IO.CancelToken\">IO.CancelToken</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">importCachingTask?</span> : <span class=\"fn\"><a href=\"./Init/Prelude.html#Option\">Option</a> <span class=\"fn\">(<a href=\"./Lean/Server/ServerTask.html#Lean.Server.ServerTask\">ServerTask</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Except\">Except</a> <a href=\"./Init/System/IOError.html#IO.Error\">IO.Error</a> <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.AvailableImportsCache\">AvailableImportsCache</a>)</span>)</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">pendingRequests</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PendingRequestMap\">PendingRequestMap</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">rpcSessions</span> : <span class=\"fn\"><a href=\"./Lean/Data/RBMap.html#Lean.RBMap\">RBMap</a> <a href=\"./Init/Prelude.html#UInt64\">UInt64</a> <span class=\"fn\">(<a href=\"./Init/System/IO.html#IO.Ref\">IO.Ref</a> <a href=\"./Lean/Server/FileWorker/Utils.html#Lean.Server.FileWorker.RpcSession\">RpcSession</a>)</span> <a href=\"./Init/Data/Ord.html#Ord.compare\">compare</a></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState\">WorkerState</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L350-L358","name":"Lean.Server.FileWorker.WorkerState","line":350,"kind":"structure","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">structure</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerState\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerState</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L348-L348","name":"Lean.Server.FileWorker.AvailableImportsCache.lastRequestTimestampMs","line":348,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.AvailableImportsCache.lastRequestTimestampMs","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.AvailableImportsCache.lastRequestTimestampMs\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">AvailableImportsCache</span>.<span class=\"name\">lastRequestTimestampMs</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.AvailableImportsCache\">AvailableImportsCache</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#Nat\">Nat</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L347-L347","name":"Lean.Server.FileWorker.AvailableImportsCache.availableImports","line":347,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.AvailableImportsCache.availableImports","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.AvailableImportsCache.availableImports\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">AvailableImportsCache</span>.<span class=\"name\">availableImports</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.AvailableImportsCache\">AvailableImportsCache</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/Completion/ImportCompletion.html#ImportCompletion.AvailableImports\">ImportCompletion.AvailableImports</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L346-L346","name":"Lean.Server.FileWorker.AvailableImportsCache.mk","line":346,"kind":"ctor","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.AvailableImportsCache.mk","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">constructor</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.AvailableImportsCache.mk\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">AvailableImportsCache</span>.<span class=\"name\">mk</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">availableImports</span> : <a href=\"./Lean/Server/Completion/ImportCompletion.html#ImportCompletion.AvailableImports\">ImportCompletion.AvailableImports</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">lastRequestTimestampMs</span> : <a href=\"./Init/Prelude.html#Nat\">Nat</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.AvailableImportsCache\">AvailableImportsCache</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L346-L348","name":"Lean.Server.FileWorker.AvailableImportsCache","line":346,"kind":"structure","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.AvailableImportsCache","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">structure</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.AvailableImportsCache\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">AvailableImportsCache</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L344-L344","name":"Lean.Server.FileWorker.PendingRequestMap","line":344,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PendingRequestMap","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PendingRequestMap\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">PendingRequestMap</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L341-L341","name":"Lean.Server.FileWorker.PendingRequest.cancelTk","line":341,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PendingRequest.cancelTk","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PendingRequest.cancelTk\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">PendingRequest</span>.<span class=\"name\">cancelTk</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PendingRequest\">PendingRequest</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/RequestCancellation.html#Lean.Server.RequestCancellationToken\">RequestCancellationToken</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L340-L340","name":"Lean.Server.FileWorker.PendingRequest.requestTask","line":340,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PendingRequest.requestTask","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PendingRequest.requestTask\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">PendingRequest</span>.<span class=\"name\">requestTask</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PendingRequest\">PendingRequest</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/ServerTask.html#Lean.Server.ServerTask\">ServerTask</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Except\">Except</a> <a href=\"./Init/System/IOError.html#IO.Error\">IO.Error</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L339-L339","name":"Lean.Server.FileWorker.PendingRequest.mk","line":339,"kind":"ctor","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PendingRequest.mk","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">constructor</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PendingRequest.mk\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">PendingRequest</span>.<span class=\"name\">mk</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">requestTask</span> : <span class=\"fn\"><a href=\"./Lean/Server/ServerTask.html#Lean.Server.ServerTask\">ServerTask</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Except\">Except</a> <a href=\"./Init/System/IOError.html#IO.Error\">IO.Error</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a>)</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">cancelTk</span> : <a href=\"./Lean/Server/RequestCancellation.html#Lean.Server.RequestCancellationToken\">RequestCancellationToken</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PendingRequest\">PendingRequest</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L339-L341","name":"Lean.Server.FileWorker.PendingRequest","line":339,"kind":"structure","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PendingRequest","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">structure</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PendingRequest\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">PendingRequest</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L199-L199","name":"Lean.Server.FileWorker.instTypeNameMemorizedInteractiveDiagnostics","line":199,"kind":"instance","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.instTypeNameMemorizedInteractiveDiagnostics","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">instance</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.instTypeNameMemorizedInteractiveDiagnostics\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">instTypeNameMemorizedInteractiveDiagnostics</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Dynamic.html#TypeName\">TypeName</a> <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.MemorizedInteractiveDiagnostics\">MemorizedInteractiveDiagnostics</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L198-L198","name":"Lean.Server.FileWorker.MemorizedInteractiveDiagnostics.diags","line":198,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.MemorizedInteractiveDiagnostics.diags","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.MemorizedInteractiveDiagnostics.diags\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">MemorizedInteractiveDiagnostics</span>.<span class=\"name\">diags</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.MemorizedInteractiveDiagnostics\">MemorizedInteractiveDiagnostics</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Lean/Widget/InteractiveDiagnostic.html#Lean.Widget.InteractiveDiagnostic\">Widget.InteractiveDiagnostic</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L197-L197","name":"Lean.Server.FileWorker.MemorizedInteractiveDiagnostics.mk","line":197,"kind":"ctor","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.MemorizedInteractiveDiagnostics.mk","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">constructor</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.MemorizedInteractiveDiagnostics.mk\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">MemorizedInteractiveDiagnostics</span>.<span class=\"name\">mk</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">diags</span> : <span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Lean/Widget/InteractiveDiagnostic.html#Lean.Widget.InteractiveDiagnostic\">Widget.InteractiveDiagnostic</a></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.MemorizedInteractiveDiagnostics\">MemorizedInteractiveDiagnostics</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L192-L199","name":"Lean.Server.FileWorker.MemorizedInteractiveDiagnostics","line":192,"kind":"structure","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.MemorizedInteractiveDiagnostics","doc":"Type of state stored in `Snapshot.Diagnostics.cacheRef?`.\n\nSee also section \"Communication\" in Lean/Server/README.md.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">structure</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.MemorizedInteractiveDiagnostics\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">MemorizedInteractiveDiagnostics</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L183-L190","name":"Lean.Server.FileWorker.server.reportDelayMs","line":183,"kind":"opaque","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.server.reportDelayMs","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">opaque</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.server.reportDelayMs\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">server</span>.<span class=\"name\">reportDelayMs</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Data/Options.html#Lean.Option\">Lean.Option</a> <a href=\"./Init/Prelude.html#Nat\">Nat</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L181-L181","name":"Lean.Server.FileWorker.instInhabitedReportSnapshotsState","line":181,"kind":"instance","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.instInhabitedReportSnapshotsState","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">instance</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.instInhabitedReportSnapshotsState\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">instInhabitedReportSnapshotsState</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Inhabited\">Inhabited</a> <a href=\"./Lean/Server/FileWorker.html#_private.Lean.Server.FileWorker.0.Lean.Server.FileWorker.ReportSnapshotsState\">Lean.Server.FileWorker.ReportSnapshotsState✝</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L132-L140","name":"Lean.Server.FileWorker.WorkerContext.resolveServerRequestResponse","line":132,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.resolveServerRequestResponse","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.resolveServerRequestResponse\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerContext</span>.<span class=\"name\">resolveServerRequestResponse</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">ctx</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">id</span> : <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.RequestID\">JsonRpc.RequestID</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">response</span> : <span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.ServerRequestResponse\">ServerRequestResponse</a> <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Json</a></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#BaseIO\">BaseIO</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L117-L130","name":"Lean.Server.FileWorker.WorkerContext.initPendingServerRequest","line":117,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.initPendingServerRequest","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.initPendingServerRequest\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerContext</span>.<span class=\"name\">initPendingServerRequest</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">responseType</span> : <a href=\"./foundational_types.html\">Type</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Lean/Data/Json/FromToJson.html#Lean.FromJson\">FromJson</a> <span class=\"fn\">responseType</span></span>]</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Init/Prelude.html#Inhabited\">Inhabited</a> <span class=\"fn\">responseType</span></span>]</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">ctx</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">id</span> : <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.RequestID\">JsonRpc.RequestID</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#BaseIO\">BaseIO</a> <span class=\"fn\">(<a href=\"./Lean/Server/ServerTask.html#Lean.Server.ServerTask\">ServerTask</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.ServerRequestResponse\">ServerRequestResponse</a> <span class=\"fn\">responseType</span>)</span>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L114-L115","name":"Lean.Server.FileWorker.WorkerContext.updateRequestsInFlight","line":114,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.updateRequestsInFlight","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.updateRequestsInFlight\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerContext</span>.<span class=\"name\">updateRequestsInFlight</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">ctx</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">method</span> : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">f</span> : <span class=\"fn\"><a href=\"./Init/Prelude.html#Nat\">Nat</a> → <a href=\"./Init/Prelude.html#Nat\">Nat</a></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#BaseIO\">BaseIO</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L107-L112","name":"Lean.Server.FileWorker.WorkerContext.modifyPartialHandler","line":107,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.modifyPartialHandler","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.modifyPartialHandler\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerContext</span>.<span class=\"name\">modifyPartialHandler</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">ctx</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">method</span> : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">f</span> : <span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo\">PartialHandlerInfo</a> → <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo\">PartialHandlerInfo</a></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#BaseIO\">BaseIO</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L100-L105","name":"Lean.Server.FileWorker.WorkerContext.modifyGetPartialHandler","line":100,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.modifyGetPartialHandler","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.modifyGetPartialHandler\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerContext</span>.<span class=\"name\">modifyGetPartialHandler</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">α</span> : <a href=\"./foundational_types.html\">Type</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">ctx</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">method</span> : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">f</span> : <span class=\"fn\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo\">PartialHandlerInfo</a> → <span class=\"fn\">α</span> <a href=\"./Init/Prelude.html#Prod\">×</a> <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo\">PartialHandlerInfo</a></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#BaseIO\">BaseIO</a> <span class=\"fn\">α</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L98-L98","name":"Lean.Server.FileWorker.WorkerContext.cmdlineOpts","line":98,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.cmdlineOpts","doc":"Options defined on the worker cmdline (i.e. not including options from `setup-file`), used for\ncontext-free tasks such as editing delay.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.cmdlineOpts\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerContext</span>.<span class=\"name\">cmdlineOpts</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Data/Options.html#Lean.Options\">Options</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L93-L93","name":"Lean.Server.FileWorker.WorkerContext.clientHasWidgets","line":93,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.clientHasWidgets","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.clientHasWidgets\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerContext</span>.<span class=\"name\">clientHasWidgets</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#Bool\">Bool</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L92-L92","name":"Lean.Server.FileWorker.WorkerContext.processor","line":92,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.processor","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.processor\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerContext</span>.<span class=\"name\">processor</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Parser/Types.html#Lean.Parser.InputContext\">Parser.InputContext</a> → <span class=\"fn\"><a href=\"./Init/System/IO.html#BaseIO\">BaseIO</a> <a href=\"./Lean/Language/Lean/Types.html#Lean.Language.Lean.InitialSnapshot\">Language.Lean.InitialSnapshot</a></span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L91-L91","name":"Lean.Server.FileWorker.WorkerContext.initParams","line":91,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.initParams","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.initParams\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerContext</span>.<span class=\"name\">initParams</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Data/Lsp/InitShutdown.html#Lean.Lsp.InitializeParams\">Lsp.InitializeParams</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L90-L90","name":"Lean.Server.FileWorker.WorkerContext.hLog","line":90,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.hLog","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.hLog\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerContext</span>.<span class=\"name\">hLog</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/System/IO.html#IO.FS.Stream\">IO.FS.Stream</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L89-L89","name":"Lean.Server.FileWorker.WorkerContext.pendingServerRequestsRef","line":89,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.pendingServerRequestsRef","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.pendingServerRequestsRef\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerContext</span>.<span class=\"name\">pendingServerRequestsRef</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO.Ref\">IO.Ref</a> <span class=\"fn\">(<a href=\"./Std/Data/TreeMap/Basic.html#Std.TreeMap\">Std.TreeMap</a> <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.RequestID\">JsonRpc.RequestID</a> <span class=\"fn\">(<a href=\"./Init/System/Promise.html#IO.Promise\">IO.Promise</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.ServerRequestResponse\">ServerRequestResponse</a> <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Json</a>)</span>)</span> <a href=\"./Init/Data/Ord.html#Ord.compare\">compare</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L88-L88","name":"Lean.Server.FileWorker.WorkerContext.partialHandlersRef","line":88,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.partialHandlersRef","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.partialHandlersRef\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerContext</span>.<span class=\"name\">partialHandlersRef</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO.Ref\">IO.Ref</a> <span class=\"fn\">(<a href=\"./Lean/Data/RBMap.html#Lean.RBMap\">RBMap</a> <a href=\"./Init/Prelude.html#String\">String</a> <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo\">PartialHandlerInfo</a> <a href=\"./Init/Data/Ord.html#Ord.compare\">compare</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L87-L87","name":"Lean.Server.FileWorker.WorkerContext.stickyDiagnosticsRef","line":87,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.stickyDiagnosticsRef","doc":"Diagnostics that are included in every single `textDocument/publishDiagnostics` notification.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.stickyDiagnosticsRef\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerContext</span>.<span class=\"name\">stickyDiagnosticsRef</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO.Ref\">IO.Ref</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Lean/Widget/InteractiveDiagnostic.html#Lean.Widget.InteractiveDiagnostic\">Widget.InteractiveDiagnostic</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L83-L83","name":"Lean.Server.FileWorker.WorkerContext.freshRequestIdRef","line":83,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.freshRequestIdRef","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.freshRequestIdRef\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerContext</span>.<span class=\"name\">freshRequestIdRef</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO.Ref\">IO.Ref</a> <a href=\"./Init/Data/Int/Basic.html#Int\">Int</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L82-L82","name":"Lean.Server.FileWorker.WorkerContext.maxDocVersionRef","line":82,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.maxDocVersionRef","doc":"Latest document version received by the client, used for filtering out notifications from\nprevious versions.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.maxDocVersionRef\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerContext</span>.<span class=\"name\">maxDocVersionRef</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO.Ref\">IO.Ref</a> <a href=\"./Init/Data/Int/Basic.html#Int\">Int</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L77-L77","name":"Lean.Server.FileWorker.WorkerContext.chanOut","line":77,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.chanOut","doc":"Synchronized output channel for LSP messages. Notifications for outdated versions are\ndiscarded on read. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.chanOut\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerContext</span>.<span class=\"name\">chanOut</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Std/Sync/Channel.html#Std.Channel\">Std.Channel</a> <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.Message\">JsonRpc.Message</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L74-L74","name":"Lean.Server.FileWorker.WorkerContext.mk","line":74,"kind":"ctor","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.mk","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">constructor</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext.mk\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerContext</span>.<span class=\"name\">mk</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">chanOut</span> : <span class=\"fn\"><a href=\"./Std/Sync/Channel.html#Std.Channel\">Std.Channel</a> <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.Message\">JsonRpc.Message</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">maxDocVersionRef </span><span class=\"fn\">freshRequestIdRef</span> : <span class=\"fn\"><a href=\"./Init/System/IO.html#IO.Ref\">IO.Ref</a> <a href=\"./Init/Data/Int/Basic.html#Int\">Int</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">stickyDiagnosticsRef</span> : <span class=\"fn\"><a href=\"./Init/System/IO.html#IO.Ref\">IO.Ref</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Lean/Widget/InteractiveDiagnostic.html#Lean.Widget.InteractiveDiagnostic\">Widget.InteractiveDiagnostic</a>)</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">partialHandlersRef</span> : <span class=\"fn\"><a href=\"./Init/System/IO.html#IO.Ref\">IO.Ref</a> <span class=\"fn\">(<a href=\"./Lean/Data/RBMap.html#Lean.RBMap\">RBMap</a> <a href=\"./Init/Prelude.html#String\">String</a> <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo\">PartialHandlerInfo</a> <a href=\"./Init/Data/Ord.html#Ord.compare\">compare</a>)</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">pendingServerRequestsRef</span> : <span class=\"fn\"><a href=\"./Init/System/IO.html#IO.Ref\">IO.Ref</a> <span class=\"fn\">(<a href=\"./Std/Data/TreeMap/Basic.html#Std.TreeMap\">Std.TreeMap</a> <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.RequestID\">JsonRpc.RequestID</a> <span class=\"fn\">(<a href=\"./Init/System/Promise.html#IO.Promise\">IO.Promise</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.ServerRequestResponse\">ServerRequestResponse</a> <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Json</a>)</span>)</span> <a href=\"./Init/Data/Ord.html#Ord.compare\">compare</a>)</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">hLog</span> : <a href=\"./Init/System/IO.html#IO.FS.Stream\">IO.FS.Stream</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">initParams</span> : <a href=\"./Lean/Data/Lsp/InitShutdown.html#Lean.Lsp.InitializeParams\">Lsp.InitializeParams</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">processor</span> : <span class=\"fn\"><a href=\"./Lean/Parser/Types.html#Lean.Parser.InputContext\">Parser.InputContext</a> → <span class=\"fn\"><a href=\"./Init/System/IO.html#BaseIO\">BaseIO</a> <a href=\"./Lean/Language/Lean/Types.html#Lean.Language.Lean.InitialSnapshot\">Language.Lean.InitialSnapshot</a></span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">clientHasWidgets</span> : <a href=\"./Init/Prelude.html#Bool\">Bool</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">cmdlineOpts</span> : <a href=\"./Lean/Data/Options.html#Lean.Options\">Options</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\">WorkerContext</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L74-L98","name":"Lean.Server.FileWorker.WorkerContext","line":74,"kind":"structure","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">structure</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.WorkerContext\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">WorkerContext</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L70-L70","name":"Lean.Server.FileWorker.instInhabitedPartialHandlerInfo","line":70,"kind":"instance","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.instInhabitedPartialHandlerInfo","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">instance</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.instInhabitedPartialHandlerInfo\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">instInhabitedPartialHandlerInfo</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Inhabited\">Inhabited</a> <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo\">PartialHandlerInfo</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L69-L69","name":"Lean.Server.FileWorker.PartialHandlerInfo.pendingRefreshInfo?","line":69,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo.pendingRefreshInfo?","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo.pendingRefreshInfo?\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">PartialHandlerInfo</span>.<span class=\"name\">pendingRefreshInfo?</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo\">PartialHandlerInfo</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.RefreshInfo\">RefreshInfo</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L68-L68","name":"Lean.Server.FileWorker.PartialHandlerInfo.requestsInFlight","line":68,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo.requestsInFlight","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo.requestsInFlight\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">PartialHandlerInfo</span>.<span class=\"name\">requestsInFlight</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo\">PartialHandlerInfo</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#Nat\">Nat</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L67-L67","name":"Lean.Server.FileWorker.PartialHandlerInfo.refreshMethod","line":67,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo.refreshMethod","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo.refreshMethod\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">PartialHandlerInfo</span>.<span class=\"name\">refreshMethod</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo\">PartialHandlerInfo</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#String\">String</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L66-L66","name":"Lean.Server.FileWorker.PartialHandlerInfo.mk","line":66,"kind":"ctor","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo.mk","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">constructor</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo.mk\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">PartialHandlerInfo</span>.<span class=\"name\">mk</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">refreshMethod</span> : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">requestsInFlight</span> : <a href=\"./Init/Prelude.html#Nat\">Nat</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">pendingRefreshInfo?</span> : <span class=\"fn\"><a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.RefreshInfo\">RefreshInfo</a></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo\">PartialHandlerInfo</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L66-L70","name":"Lean.Server.FileWorker.PartialHandlerInfo","line":66,"kind":"structure","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">structure</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.PartialHandlerInfo\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">PartialHandlerInfo</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L64-L64","name":"Lean.Server.FileWorker.RefreshInfo.successiveRefreshAttempts","line":64,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.RefreshInfo.successiveRefreshAttempts","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.RefreshInfo.successiveRefreshAttempts\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">RefreshInfo</span>.<span class=\"name\">successiveRefreshAttempts</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.RefreshInfo\">RefreshInfo</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#Nat\">Nat</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L63-L63","name":"Lean.Server.FileWorker.RefreshInfo.lastRefreshTimestamp","line":63,"kind":"def","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.RefreshInfo.lastRefreshTimestamp","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.RefreshInfo.lastRefreshTimestamp\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">RefreshInfo</span>.<span class=\"name\">lastRefreshTimestamp</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.RefreshInfo\">RefreshInfo</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#Nat\">Nat</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L62-L62","name":"Lean.Server.FileWorker.RefreshInfo.mk","line":62,"kind":"ctor","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.RefreshInfo.mk","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">constructor</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.RefreshInfo.mk\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">RefreshInfo</span>.<span class=\"name\">mk</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">lastRefreshTimestamp </span><span class=\"fn\">successiveRefreshAttempts</span> : <a href=\"./Init/Prelude.html#Nat\">Nat</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.RefreshInfo\">RefreshInfo</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/7c3ca70e29a0806bd4bfc62eae7084bbaf1a303d/src/Lean/Server/FileWorker.lean#L62-L64","name":"Lean.Server.FileWorker.RefreshInfo","line":62,"kind":"structure","docLink":"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.RefreshInfo","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">structure</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/FileWorker.html#Lean.Server.FileWorker.RefreshInfo\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">FileWorker</span>.<span class=\"name\">RefreshInfo</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"}]}